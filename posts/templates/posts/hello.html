{% extends 'posts/base.html' %}
{% block title %}Твоя платформа вкусной еды - Onlyfoods{% endblock %}
{% load static %}
{% block content %}
    <div id="app" class="container-fluid p-0" style="background-color: #fdf5e6;">
        <!-- Hero Section -->
<section id="hero"
         class="vh-100 d-flex align-items-center justify-content-center text-center text-dark position-relative"
         style="background-color: #fdf5e6;">
    <div class="container position-relative" data-aos="zoom-in" style="z-index: 10;">
        <!-- Логотип -->
        <div class="mb-4">
            <img src="{% static 'onlyfoods_logo.png' %}" alt="Onlyfoods Logo" class="img-fluid"
                 style="width: 150px; height: auto;">
        </div>
        <!-- Заголовок и описание -->
        <h1 class="display-2 fw-bold mb-4" style="color: #9e0505;">Onlyfoods</h1>
        <p class="lead mb-5" style="color: #9e0505;">
            Превращайте свои блюда в шедевры. Делитесь с миром. Вдохновляйтесь премиум-контентом.
        </p>
        <!-- Кнопки -->
        <a href="{% url 'users:register' %}"
           class="btn btn-outline-dark btn-lg px-5 me-3"
           style="border-color: #9e0505; color: #9e0505; z-index: 20; position: relative;">Присоединиться</a>
        <a href="{% url 'users:login' %}"
           class="btn btn-primary btn-lg px-5"
           style="background-color: #9e0505; border: none; z-index: 20; position: relative;">Войти</a>
    </div>
    <!-- Анимация частиц -->
    <div id="particles-js" class="position-absolute w-100 h-100" style="z-index: 1;"></div>
</section>


        <!-- Popular Recipes Section -->
        <section class="py-5">
            <div class="container">
                <h2 class="text-center mb-5" style="color: #9e0505;">Популярные работы</h2>
                <div class="row" id="recipeContainer">
                    <div class="col-md-push-12 mb-5 recipe-card" data-aos="fade-up" data-aos-delay="300">
                        <div class="card h-100 shadow-lg border-0 rounded overflow-hidden"
                             style="transition: transform 0.3s;">
                            <div class="position-relative">
                                <img src="{% static 'burger.jpeg' %}" class="card-img-top" alt="Бургер"
                                     style="height: 600px; object-fit: cover;">
                                <div class="position-absolute top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-flex align-items-center justify-content-center opacity-0 hover-overlay">
                                    <h5 class="text-light text-center">Смотреть рецепт</h5>
                                </div>
                            </div>
                            <div class="card-body text-center">
                                <h5 class="card-title" style="color: #9e0505;">Классический бургер</h5>
                                <p class="card-text text-muted">Для любителей сочного вкуса.</p>
                                <a href="#" class="btn btn-primary btn-sm"
                                   style="background-color: #9e0505; border: none;">Подробнее</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Load More Recipes -->
        <section id="loadMoreRecipes" class="py-5" style="background-color: #fdf5e6;">
            <div class="container">
                <h2 class="text-center mb-5" style="color: #9e0505;">Еще рецепты</h2>
                <div class="row g-4" id="newRecipesContainer">
                    <!-- Здесь будут появляться новые карточки -->
                </div>
            </div>
        </section>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js/particles.min.js"></script>
    <script>
        // Инициализация AOS
        AOS.init();

        // Динамическая загрузка новых карточек
        function loadNewRecipes() {
            const newRecipes = [
                {
                    title: 'Шоколадный торт',
                    description: 'Идеальный десерт для любителей сладкого.',
                    image: '{% static "tort.jpeg" %}'
                },
                {title: 'Салат Цезарь', description: 'Легкий и вкусный салат.', image: '{% static "salad.jpeg" %}'},
                {
                    title: 'Курица в кисло-сладком соусе',
                    description: 'Традиционное блюдо с восточным акцентом.',
                    image: '{% static "chicken.jpeg" %}'
                }
            ];

            const container = document.getElementById('newRecipesContainer');

            newRecipes.forEach(recipe => {
                const newRecipeCard = document.createElement('div');
                newRecipeCard.classList.add('col-md-4', 'mb-4');
                newRecipeCard.setAttribute('data-aos', 'fade-up');

                newRecipeCard.innerHTML = `
                <div class="card h-100 shadow-lg border-0 rounded">
                    <img src="${recipe.image}" class="card-img-top" alt="${recipe.title}" style="height: 250px; object-fit: cover;">
                    <div class="card-body text-center">
                        <h5 class="card-title" style="color: #9e0505;">${recipe.title}</h5>
                        <p class="card-text text-muted">${recipe.description}</p>
                        <a href="#" class="btn btn-secondary btn-sm">Смотреть рецепт</a>
                    </div>
                </div>`;
                container.appendChild(newRecipeCard);
            });
        }

        // Загрузка карточек при скролле
        window.addEventListener('scroll', () => {
            const scrollPosition = document.documentElement.scrollTop + window.innerHeight;
            const loadPosition = document.getElementById('loadMoreRecipes').offsetTop;

            if (scrollPosition >= loadPosition) {
                loadNewRecipes();
            }
        });

        // Инициализация Particles.js
        particlesJS("particles-js", {
            particles: {
                number: {value: 80, density: {enable: true, value_area: 1000}},
                color: {value: "#9e0505"},
                shape: {type: "circle", stroke: {width: 0, color: "#000000"}},
                opacity: {value: 0.4},
                size: {value: 11, random: true},
                line_linked: {enable: true, distance: 1, color: "#9e0505", opacity: 0.5, width: 2},
                move: {enable: true, speed: 3}
            },
            interactivity: {
                detect_on: "canvas",
                events: {
                    onhover: {enable: true, mode: "repulse"},
                    onclick: {enable: true, mode: "push"},
                    resize: true
                },
                modes: {
                    repulse: {distance: 200},
                    push: {particles_nb: 4}
                }
            },
            retina_detect: true
        });
    </script>
{% endblock %}
